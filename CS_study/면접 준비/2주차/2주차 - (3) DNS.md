# 컴퓨터 네트워크 스터디 2주차 - DNS

- [HTTPS](#https)
- [DNS](#-dns)
- [DNS 작동 방식](#dns-작동-방식)
- [DNS 질의 종류](#dns-질의-종류)
- [DNS 서버에게 IP 주소를 요청할 때, UDP를 사용하는 이유](#dns-서버에게-ip-주소를-요청할-때-udp를-사용하는-이유)
- [DNS 레코드](#dns-레코드)

<br/><br/>

## ⭐️ DNS

### DNS(도메인 네임 시스템)
: 도메인 이름(`www.example.com`)을 IP 주소(`192.0.2.1`)로 변환해주는 시스템
- 계층형 구조로 구현된 분산 데이터베이스
- 사람이 이해하기 쉬운 도메인 이름을 컴퓨터가 이해할 수 있는 IP 주소로 바꾸어, 사용자가 웹사이트에 쉽게 접근할 수 있게 도와준다.
- **호스트가 도메인 네임에 대한 IP 주소를 요청하면 DNS은 계층 질의를 통해 IP 주소를 얻어준다. 만약 로컬 DNS에 해당 IP 주소가 캐싱되어 있다면 바로 받는다.**
- **빠른 응답을 제공하기 위해 DNS는 UDP 기반으로 동작하고 DNS 서버들은 요청 정보를 캐싱해둔다.**

<br/><br/>

---

## DNS 작동 방식

1. **사용자가 도메인 입력**
    - 사용자가 브라우저에 도메인 이름(ex. `example.com`)을 입력한다.
    
2. **로컬 DNS 서버 조회**
    - 먼저, 사용자의 컴퓨터는 캐시에서 IP 주소를 찾고, 없다면 인터넷 서비스 제공업체(ISP)의 **로컬 DNS 서버**에 질의한다.

3. **루트 네임 서버로 요청 전달**
    - 로컬 DNS 서버가 IP 주소를 모르면, 최상위의 **루트 네임 서버**에 요청을 전달한다. <br/>
    → 루트 네임 서버는 요청을 다음 단계로 안내한다.

4. **TLD 네임 서버로 요청 전달**
    - 루트 네임 서버는 `.com`, `.org`와 같은 **최상위 도메인(TLD) 네임 서버**로 요청을 전달한다.

5. **권한 있는 네임 서버로 요청 전달**
    - TLD 네임 서버는 도메인의 **권한 있는(authoritative) 네임 서버**로 요청을 보낸다. <br/> → 이 서버는 실제 IP 주소를 가지고 있다.

6. **IP 주소 반환**
    - 권한 있는 네임 서버가 IP 주소를 반환하면, 로컬 DNS 서버를 거쳐 사용자에게 전달된다.'

7. **접속 완료**
    - 사용자의 브라우저가 해당 IP 주소로 접속하여 웹페이지를 표시한다.


<br/>

1. Chrome 같은 브라우저에서 [www.google.com을](http://www.google.xn--com-of0o/) 입력한다.
2. 브라우저는 먼저 가장 가까운 곳부터 찾아본다. 
브라우저 자체 캐시도 확인해보고, 컴퓨터 OS에 있는 hosts 파일도 확인해보고, 로컬 DNS 서버 캐시도 확인해본다.
3. 먼저 Root DNS 서버에 가서 '.com을 관리하는 서버가 어디있어?' 하고 물어본다.
- 그 다음 `.com` DNS 서버에 가서 'google.com을 관리하는 서버가 어디있어?' 하고 물어본다.
4. 마지막으로 `google.com` 권한 서버에 가서 '[www.google.com의](http://www.google.xn--com-yh0o/) IP 주소가 뭐야?' 하고 물어보면 드디어 IP 주소를 알 수 있다.
5. 이렇게 찾은 IP 주소는 나중에 또 쓸 수 있게 로컬 DNS 서버에 저장해두고, 브라우저한테 알려준다.

<br/><br/>

---

## DNS 질의 종류
DNS 질의는 **재귀 질의**, **반복 질의**, **역방향 질의**로 나뉜다.

<br/>

### **재귀 질의**
: 도메인 네임에 해당하는 IP주소를 통해 DNS가 다른 DNS에게 재귀적으로 IP 주소를 물어보는 것
- 클라이언트가 재귀 DNS 서버에 요청하면, 서버는 최종 IP 주소를 찾을 때까지 다른 DNS 서버에 질의하여 결과를 사용자에게 반환한다.

<br/>

### **반복 질의**
: IP 주소를 찾기 위해 반복적으로 질의하는 것
- 클라이언트가 재귀 DNS 서버와 각 계층의 DNS 서버에 직접 질의하며 순차적으로 정보를 수집해 IP 주소를 찾는다.

<br/>

### **역방향 질의**
: IP 주소를 통해 도메인 이름을 찾는 방식으로, 주로 네트워크 진단 및 보안에 활용된다.

<br/><br/>

---

## DNS 서버에게 IP 주소를 요청할 때, UDP를 사용하는 이유
- **DNS는 신뢰성보다 속도가 더 중요한 서비스이기 때문에 연결 설정에 드는 비용이 없는 UDP를 사용한다.**
- **DNS는 연결 상태를 유지할 필요가 없고, TCP보다 많은 클라이언트를 수용할 수 있는 UDP를 사용한다.**

<br/>

### UDP를 사용하는 이유
- **속도**
    - UDP는 연결을 설정하지 않고도 데이터를 빠르게 전송할 수 있기 때문에 TCP보다 속도가 빠르다.


- **간단한 연결**
    - DNS 요청은 한 번에 끝나는 단순한 구조이기 때문에, 연결 설정이 필요 없는 UDP가 효율적이다.


- **낮은 오버헤드**
    - UDP는 TCP와 달리 연결 유지, 흐름 제어, 오류 검사 같은 추가 기능이 없기 때문에 오버헤드가 낮아, 네트워크 자원을 더 적게 사용하면서도 빠르게 응답할 수 있다.

<br/><br/>

---

## DNS 레코드

### DNS 레코드
: 도메인에 대한 다양한 정보를 포함한 항목으로, 도메인 이름과 관련된 IP 주소나 메일 서버 등을 정의한다. 
- 데이터베이스 서버의 한 유형이며, 클라이언트로부터 질의를 받았을 때 그에 맞는 데이터를 응답해야 합니다. 
- 데이터베이스의 한 항목(row)을 DNS 서버에서는 리소스 레코드라고 부릅니다.
- 네트워크 자원의 위치와 성격을 명확히 하여, 도메인 기반의 인터넷 서비스가 원활하게 작동할 수 있게 해준다.

<br/>

### 주요 DNS 레코드
- **A 레코드**
: IP 주소와 도메인 주소를 매핑할 때 사용하는 레코드

- AAAA 레코드
: 도메인 이름을 IPv6 주소로 매핑하는 레코드

- **CNAME 레코드**
: 기존 도메인에 별명을 붙인 레코드

- MX 레코드
: 메일 서버를 지정하여 이메일을 전달할 주소를 정의하는 레코드

- **TXT 레코드**
: 텍스트를 입력할 수 있는 레코드


<br/><br/>
<br/>

