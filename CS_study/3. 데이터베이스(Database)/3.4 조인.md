
# 📌 조인

<br/>

## 목차
1. [조인](#-HTTP)
2. [내부 조인 (INNER JOIN)](#-HTTP)
3. [외부 조인 (OUTER JOIN)](#-HTTP)

<br/><br/>

## ✅ 조인 (join)
: **여러 테이블을 합쳐 원하는 데이터를 얻는 작업**
- 테이블을 하나로 합치려면 각 테이블에서 공통된 열을 이용한다. 
- 원하는 결과 데이터를 얻으려면 어떤 조인 연산을 수행할지, 조건을 무엇으로 할지를 고민해야 한다.
- 결과에 포함되는 테이블의 범주에 따라 크게 내부 조인, 외부 조인으로 구분한다.


![SQL] 데이터 조인(Inner, Outer, Full outer, Cross join)](https://img1.daumcdn.net/thumb/R800x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FvjWa2%2FbtqXb1HydaK%2FKCAmZlQx1uMDOFjxlRvrbk%2Fimg.png) <br/> 
출처: [데이터 조인](https://daeun-computer-uneasy.tistory.com/17)

<br/>

#### ⏩ SQL 조인 연산자

- **ON** <br/>
: 조인 연산에 대한 **조건절을 작성**할 때 사용하는 연산자
  - 각 테이블에서 어떠한 속성을 사용해 연산을 수행할지 나타낸다.

- **USING** <br/>
: 조인 연산을 하려는 테이블에서 **속성명이 동일할 때, USING 연산자 뒤에 공통되는 속성명만 작성해 조건을 간단하게 적을 수 있다.**

- **WHERE** <br/>
: 테이블에서 **원하는 데이터를 조회하기 위한 조건절을 작성**할 때 사용하는 연산자
  - 조건절에 비교 연산자, IN 연산자, BETWEEN 연산자 등을 사용해 원하는 데이터를 얻을 수 있다.

- **IN** <br/>
: **WHERE 절과 함께 사용**하며, **IN 연산자 뒤에 나오는 조건에 하나라도 해당하는 값을 검색할 수 있다.**

- **BETWEEN** <br/>
: **특정 범위에 속하는 데이터를 조회**할 때 사용하는 연산자
  - '>', '<' 처럼 값을 비교하는 데 사용한다.

- **LIKE** <br/>
: **특정 데이터를 조회**할 때 사용하는 연산자
  - '%' 또는 '_'와 함께 사용한다. 
  - %는 길이를 알 수 없는 문자를, '_'는 문자 하나를 의미하며 특정 길이의 문자를 검색할 때 사용한다.

<br/><br/>
<br/>

## ✅ 내부 조인 (INNER JOIN)
: **2개 이상의 테이블에서 공통 속성을 가진 데이터를 검색하기 위한 연산**

- 테이블 2개에서 내부 조인을 수행하는 SQL 문의 형식
```
SELECT [조회하려는 열]
  FROM [테이블1] INNER JOIN [테이블2]
      ON [조인에 대한 조건]
```

<br/>

ex) 학생별 가입 동아리를 확인하고 싶다면 두 테이블로 조인 연산을 수행한다.
  - 학번, 이름, 전공이 저장된 ‘학생 전공 테이블’과, 학번과 동아리가 저장된 ‘학생 동아리 테이블’
```
SELECT *
  FROM 학생 전공 테이블 INNER JOIN 학생 동아리 테이블
    ON 학생 전공 테이블.학번 = 학생 동아리 테이블.학번
```

<br/>

### ☑️ 조인 표현
- **명시적 조인 표현** <br/>
: (위의 예처럼) **JOIN 연산자 뒤에 조인할 테이블을 명시적으로 표현**하는 방법

- **암시적 조인 표현** <br/>
: (아래 예처럼) **JOIN 연산자를 명시하지 않고 FROM 절 뒤에 조인할 테이블만 나열**하는 방법

```
SELECT [얻으려는 열]
  FROM [테이블1], [테이블2]
    ON [조인에 대한 조건]
```

<br/><br/>
<br/>

## ✅ 외부 조인 (OUTER JOIN)
: 테이블에서 **조인 조건에 해당하는 속성 값이 없는 데이터까지 모두 조회**하는 연산
- **존재하지 않는 데이터에 대해서는 NULL로 표기**한다.


- 외부 조인을 수행하는 SQL 문
   - JOIN 연산자로 조인을 수행하기 위한 테이블을 나열하는데,이때 **LEFT, RIGHT, FULL 중 하나**를 골라야 한다. 
   - **ON 조건절에는 조인 연산에 대한 조건을 작성**한다.
```
SELECT [조회하려는 열]
  FROM [테이블1] [LEFT|RIGHT|FULL] OUTER JOIN [테이블2]
    ON [조인에 대한 조건]
```

<br/>

ex) 왼쪽 외부 조인은 왼쪽 테이블의 모든 튜플을 포함한다.
```
SELECT *
  FROM 학생 전공 테이블 LEFT OUTER JOIN 학생 동아리 테이블
    ON 학생 전공 테이블.학번 = 학생 동아리 테이블.학번
```

<br/>

### ☑️ 외부 조인 종류
- **왼쪽 외부 조인(LEFT OUTER JOIN)** <br/>
: **연산자 왼쪽 테이블의 모든 데이터를 결과 테이블에 조회**한다. 
  - 조건을 만족하는 튜플이 왼쪽 테이블에만 있고, 오른쪽 테이블에는 존재하지 않아도 결과 테이블에 조회한다.

- **오른쪽 외부 조인(RIGHT OUTER JOIN)** <br/>
: **연산자 오른쪽 테이블의 모든 데이터를 결과 테이블에 조회**한다. 
  - 조건을 만족하는 튜플이 오른쪽 테이블에만 있고, 왼쪽 테이블에는 존재하지 않아도 결과 테이블에 조회한다.

- **완전 외부 조인(FULL OUTER JOIN)** <br/>
: **양쪽 테이블에서 조건을 만족하지 않는 데이터가 있더라도 모두 포함해 결과 테이블에 조회**한다.

<br/>

#### ⏩ 교차 조인과 셀프 조인

##### 1. 교차 조인(CROSS JOIN)
: **각 테이블의 행과 다른 테이블의 모든 행을 결합**해 결과 테이블을 생성한다. 
- **카티션 곱(cartesian product)**이라고도 한다.
- 조인에 대한 조건이 없어서 **모든 행이 결합**된다고 보면 된다. 


- ex) m개 행을 가진 테이블과 n개 행을 가진 테이블에 교차 조인을 수행하면, <br/>
 m × n개 행을 가진 결과 테이블이 만들어진다.

```
SELECT *
  FROM [테이블1] CROSS JOIN [테이블2]
```

<br/>

##### 2. 셀프 조인(SELF JOIN)
: **한 테이블이 자기 자신과 조인 연산을 수행**하는 것
- SQL 문에서 셀프 조인을 하려면 FROM 절에 같은 테이블을 2번 적어야 한다. <br/>
이때 테이블을 구분하기 위해 **별칭을 사용**한다.

```
SELECT *
  FROM [테이블1] [별칭1], [테이블1] [별칭2]
WHERE [별칭1의 열과 별칭2의 열에 대한 검색 조건]
```


<br/><br/>
